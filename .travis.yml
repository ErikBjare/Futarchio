language: go

go:
    - 1.2
    - 1.3
    - tip

before_install:
    - bash ./scripts/setup_gae.sh

install:
    - cd src
    - go get -d -v ./... && go build -v ./...
    - cd ..

before_script:
    - cd src/frontend
    - ../../go_appengine/goapp serve &
    - cd ../..
    - sleep 5 # give some time to start

script:
    - ./go_appengine/goapp test -v ./src/...
